{"id":"acr-1re","title":"Refinery Patrol","description":"Merge queue processor patrol loop with verification gates.","status":"open","priority":2,"issue_type":"molecule","created_at":"2026-01-14T14:30:51.767694-07:00","updated_at":"2026-01-14T14:30:51.767694-07:00","created_by":"Rich Haase"}
{"id":"acr-4q6","title":"Witness Patrol","description":"Per-rig worker monitor patrol loop with progressive nudging.","status":"open","priority":2,"issue_type":"molecule","created_at":"2026-01-14T14:30:51.683733-07:00","updated_at":"2026-01-14T14:30:51.683733-07:00","created_by":"Rich Haase"}
{"id":"acr-6i1","title":"Phase 4: Summarizer backend support","description":"Make summarizer use a configurable backend (separate from reviewers).\n\n## Goal\nAllow summarizer to use a different backend than the reviewers.\n\n## Tasks\n1. Update internal/summarizer/summarizer.go\n   - Remove hardcoded codex command (line 106)\n   - Accept backend Backend parameter in Summarize()\n   - Use backend to run summarization prompt\n   - Keep existing prompt and output parsing logic\n\n2. Update cmd/acr/review.go\n   - Resolve summarizer backend (config/flag/env or default to reviewer backend)\n   - Load prompt for summarizer backend\n   - Pass summarizer backend and prompt to summarizer.Summarize()\n\n## Verification\n- Summarization works with same backend as reviewers\n- Summarization works with different backend from reviewers (e.g., Gemini reviewers, Claude summarizer)\n- All backend combinations work correctly\n\n## Reference\nSee plan: /Users/rich.haase/.claude/plans/valiant-rolling-lovelace.md (Phase 4)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T15:03:46.352792-07:00","updated_at":"2026-01-14T15:03:46.352792-07:00","created_by":"mayor","dependencies":[{"issue_id":"acr-6i1","depends_on_id":"acr-awg","type":"blocks","created_at":"2026-01-14T15:04:03.507416-07:00","created_by":"mayor"}]}
{"id":"acr-acr-polecat-furiosa","title":"acr-acr-polecat-furiosa","description":"acr-acr-polecat-furiosa\n\nrole_type: polecat\nrig: acr\nagent_state: spawning\nhook_bead: acr-kcx\nrole_bead: hq-polecat-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"tombstone","priority":2,"issue_type":"agent","created_at":"2026-01-14T14:44:12.152467-07:00","updated_at":"2026-01-14T15:02:52.021399-07:00","created_by":"mayor","deleted_at":"2026-01-14T15:02:52.021399-07:00","deleted_by":"mayor","delete_reason":"delete","original_type":"agent"}
{"id":"acr-acr-refinery","title":"Refinery for acr - processes merge queue.","description":"Refinery for acr - processes merge queue.\n\nrole_type: refinery\nrig: acr\nagent_state: idle\nhook_bead: null\nrole_bead: hq-refinery-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-14T14:30:51.43425-07:00","updated_at":"2026-01-14T14:30:51.501293-07:00","created_by":"Rich Haase"}
{"id":"acr-acr-witness","title":"Witness for acr - monitors polecat health and progress.","description":"Witness for acr - monitors polecat health and progress.\n\nrole_type: witness\nrig: acr\nagent_state: idle\nhook_bead: null\nrole_bead: hq-witness-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-14T14:30:51.237415-07:00","updated_at":"2026-01-14T14:30:51.304112-07:00","created_by":"Rich Haase"}
{"id":"acr-arz","title":"Pluggable backend support for summarizer","description":"Replace hardcoded codex backend with pluggable backend system supporting multiple AI providers (Claude, Cursor, Gemini, etc.)","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-14T16:11:21.79847-07:00","updated_at":"2026-01-14T16:11:21.79847-07:00","created_by":"mayor"}
{"id":"acr-awg","title":"Phase 3: Additional backend implementations","description":"Implement Claude, Cursor, and Gemini backends.\n\n## Goal\nImplement the three new backends with their own CLI invocation and output parsing.\n\n## Tasks\n1. Implement internal/backend/claude.go\n   - ClaudeBackend struct implementing Backend interface\n   - CheckAvailable(): Verify claude CLI in PATH\n   - RunReview(): Invoke Claude CLI with custom prompt\n   - Parse Claude output format into domain.Finding structs\n\n2. Implement internal/backend/cursor.go\n   - Same structure as ClaudeBackend\n   - Handle Cursor-specific CLI invocation and output parsing\n\n3. Implement internal/backend/gemini.go\n   - Same structure as ClaudeBackend\n   - Handle Gemini-specific CLI invocation and output parsing\n\n4. Register all backends in registry.go\n\n5. Write integration tests for each backend (requires actual CLIs installed)\n\n## Note\nEach backend handles its own output format translation to standard domain.Finding structure. Codex uses JSONL, others may use different formats.\n\n## Verification\n- Can run reviews with homogeneous pools (all Claude, all Gemini, etc.)\n- Can run reviews with heterogeneous pools (3 Claude + 2 Gemini + 5 Codex)\n- All backends parse their output correctly\n- Integration tests pass (when CLIs available)\n\n## Reference\nSee plan: /Users/rich.haase/.claude/plans/valiant-rolling-lovelace.md (Phase 3)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T15:03:37.841277-07:00","updated_at":"2026-01-14T15:03:37.841277-07:00","created_by":"mayor","dependencies":[{"issue_id":"acr-awg","depends_on_id":"acr-uz7","type":"blocks","created_at":"2026-01-14T15:04:03.474151-07:00","created_by":"mayor"}]}
{"id":"acr-hn1","title":"Phase 1: Backend abstraction foundation","description":"dispatched_by: mayor\n\nCreate backend interface and extract Codex implementation.\n\n## Goal\nCreate the backend interface and extract existing Codex implementation without changing behavior.\n\n## Tasks\n1. Create internal/backend/ package\n   - backend.go: Define Backend interface, ReviewConfig, ReviewResult types\n   - registry.go: Backend registration and lookup functions\n   - codex.go: Extract existing codex logic from runner.go:167-248 into CodexBackend struct\n\n2. Update internal/runner/runner.go\n   - Modify Runner struct to accept list of (Backend, count) tuples for heterogeneous pools\n   - Replace hardcoded codex command with backend delegation\n   - Spawn reviewers with appropriate backend based on pool configuration\n\n3. Add tests for Backend interface and CodexBackend\n\n## Verification\n- Existing functionality works identically with refactored backend\n- All tests pass\n- No behavior changes from user perspective\n\n## Reference\nSee plan: /Users/rich.haase/.claude/plans/valiant-rolling-lovelace.md (Phase 1)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-14T15:03:12.750758-07:00","updated_at":"2026-01-14T15:07:50.444324-07:00","closed_at":"2026-01-14T15:07:50.444324-07:00","close_reason":"Closed","created_by":"mayor"}
{"id":"acr-kcx","title":"Add multi-backend support (Claude, Cursor, Gemini)","description":"Implement multi-backend support for ACR with per-backend customizable review prompts.\n\n## UPDATED REQUIREMENTS (2026-01-14)\n- Support Claude, Cursor, Gemini backends alongside Codex\n- Per-backend custom review prompts (stored in external files)\n- **HETEROGENEOUS REVIEWER POOLS**: Run multiple backend types in a single review (e.g., 3 Claude + 2 Gemini + 5 Codex reviewers)\n- **SEPARATE SUMMARIZER BACKEND**: Configure different backend for summarization vs review\n- Backend selection via --backend flag (simple mode) or --reviewer-backend flag (advanced mode)\n- ACR_BACKEND, ACR_REVIEWER_BACKENDS, ACR_SUMMARIZER_BACKEND env vars\n- .acr.yaml config with 'backend' (simple) or 'reviewer_backends' (advanced) + 'summarizer_backend'\n- Fail fast if backend CLI not installed\n- Maintain backwards compatibility (Codex as default)\n\n## Implementation Plan\nSee updated plan file at: /Users/rich.haase/.claude/plans/valiant-rolling-lovelace.md\n\n## Configuration Examples\n\nSimple mode (backwards compatible):\n```yaml\nbackend: claude  # All reviewers + summarizer use Claude\n```\n\nAdvanced mode (heterogeneous pool):\n```yaml\nreviewer_backends:\n  claude: 3   # 3 Claude reviewers\n  gemini: 2   # 2 Gemini reviewers\n  codex: 5    # 5 Codex reviewers\nsummarizer_backend: claude  # Use Claude for summarization\n```\n\n## Phases\n1. Backend abstraction foundation (interface + Codex extraction, support heterogeneous pools)\n2. Configuration system updates (backend/reviewer_backends/summarizer_backend/prompt config)\n3. Additional backend implementations (Claude, Cursor, Gemini)\n4. Summarizer backend support (configurable separate from reviewers)\n5. Documentation\n\n## Verification\n- Unit tests for backend interface, config resolution, prompt loading\n- Integration tests for each backend and heterogeneous combinations\n- Manual testing with different backend combinations","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-14T14:44:05.457357-07:00","updated_at":"2026-01-14T15:02:58.973885-07:00","closed_at":"2026-01-14T15:02:58.973885-07:00","close_reason":"Interrupted long-running one-shot implementation. Breaking down into 5 phased beads with dependencies for better incremental progress, review, and quality. See acr-* phase beads.","created_by":"mayor"}
{"id":"acr-ofk","title":"Deacon Patrol","description":"Mayor's daemon patrol loop for handling callbacks, health checks, and cleanup.","status":"open","priority":2,"issue_type":"molecule","created_at":"2026-01-14T14:30:51.600925-07:00","updated_at":"2026-01-14T14:30:51.600925-07:00","created_by":"Rich Haase"}
{"id":"acr-uw5","title":"Phase 5: Documentation","description":"Complete user-facing documentation for multi-backend support.\n\n## Goal\nDocument all new features for users.\n\n## Tasks\n1. Update README.md\n   - Document simple mode (--backend flag) and advanced mode (--reviewer-backend)\n   - Document --summarizer-backend for separate summarizer configuration\n   - List available backends with CLI installation instructions\n   - Show .acr.yaml examples for both simple and advanced configurations\n   - Provide examples of heterogeneous reviewer pools\n   - Add migration guide for existing users\n\n2. Update acr --help output\n   - List available backends with descriptions\n   - Show backend selection options\n   - Provide usage examples\n\n3. Add example prompt files in repository (optional)\n   - Example .acr/prompts/ directory with sample prompts\n\n## Verification\n- Documentation is clear and complete\n- All examples are tested and working\n- Migration guide covers common scenarios\n\n## Reference\nSee plan: /Users/rich.haase/.claude/plans/valiant-rolling-lovelace.md (Phase 5)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T15:03:55.536092-07:00","updated_at":"2026-01-14T15:03:55.536092-07:00","created_by":"mayor","dependencies":[{"issue_id":"acr-uw5","depends_on_id":"acr-6i1","type":"blocks","created_at":"2026-01-14T15:04:03.540453-07:00","created_by":"mayor"}]}
{"id":"acr-uz7","title":"Phase 2: Configuration system updates","description":"dispatched_by: mayor\n\nAdd backend and prompt configuration support.\n\n## Goal\nAdd configuration for backend selection (simple + advanced modes) and prompt loading.\n\n## Tasks\n1. Update internal/config/config.go\n   - Add Backend, ReviewerBackends, SummarizerBackend fields\n   - Add Prompts struct with per-backend prompt paths\n   - Update resolution logic (flag \u003e env \u003e config \u003e default)\n   - Add validation for backend names and counts\n   - Add mode resolution logic (reviewer_backends vs backend)\n\n2. Create internal/prompt/ package\n   - loader.go: Load prompts from file paths\n   - defaults.go: Embed default prompts using go:embed\n   - defaults/*.txt: Default prompts for claude, cursor, gemini\n   - ResolvePrompt(): User config → embedded default → error\n\n3. Update cmd/acr/main.go\n   - Add flags: --backend, --reviewer-backend, --summarizer-backend\n   - Add env vars: ACR_BACKEND, ACR_REVIEWER_BACKENDS, ACR_SUMMARIZER_BACKEND\n   - Parse reviewer-backend format (claude:3,gemini:2)\n   - Add backend validation and CLI availability checks\n\n4. Update cmd/acr/review.go\n   - Load prompts for all backends in pool\n   - Build heterogeneous reviewer pool configuration\n   - Update log messages to show backend mix\n\n## Verification\n- Can configure homogeneous pools (backend: claude)\n- Can configure heterogeneous pools (reviewer_backends: {claude:3, gemini:2})\n- Can configure separate summarizer backend\n- But only Codex works (other backends not implemented yet)\n\n## Reference\nSee plan: /Users/rich.haase/.claude/plans/valiant-rolling-lovelace.md (Phase 2)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-14T15:03:26.627237-07:00","updated_at":"2026-01-14T15:20:12.217676-07:00","closed_at":"2026-01-14T15:20:12.217676-07:00","close_reason":"Closed","created_by":"mayor","dependencies":[{"issue_id":"acr-uz7","depends_on_id":"acr-hn1","type":"blocks","created_at":"2026-01-14T15:04:03.441977-07:00","created_by":"mayor"}]}
